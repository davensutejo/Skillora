{% extends "base.html" %}

{% block title %}Learning Path | Skillora{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/learning_path.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
{% endblock %}

{% block content %}
<body class="learning-path-page">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle">
        <i class="fas fa-bars"></i>
    </button>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <a href="{{ url_for('views.dashboard') }}" class="sidebar-logo">
                <div class="logo-circle">
                    <div class="logo-letter">S</div>
                </div>
                <span class="logo-text">Skillora</span>
            </a>
            
            <div class="sidebar-menu">
                <p class="menu-category">Main</p>
                <a href="{{ url_for('views.dashboard') }}" class="menu-item">
                    <i class="fas fa-home"></i>
                    Dashboard
                </a>
                <a href="{{ url_for('views.learning_path') }}" class="menu-item active">
                    <i class="fas fa-graduation-cap"></i>
                    Learning Path
                </a>
                <a href="{{ url_for('views.my_courses') }}" class="menu-item">
                    <i class="fas fa-book"></i>
                    My Courses
                </a>    
                
                <p class="menu-category">Resources</p>
                <a href="{{ url_for('views.tutors') }}" class="menu-item">
                    <i class="fas fa-chalkboard-teacher"></i>
                    AI Tutor
                </a>
                <a href="{{ url_for('views.dashboard') }}" class="menu-item">
                    <i class="fas fa-chart-line"></i>
                    Progress
                </a>
                
                <p class="menu-category">Account</p>
                <a href="{{ url_for('views.dashboard') }}" class="menu-item">
                    <i class="fas fa-user-circle"></i>
                    Profile
                </a>
                <a href="{{ url_for('views.dashboard') }}" class="menu-item">
                    <i class="fas fa-cog"></i>
                    Settings
                </a>
            </div>
            
            <div class="user-profile">
                <div class="user-avatar">
                    {{ current_user.first_name[0] }}
                </div>
                <div class="user-info">
                    <div class="user-name">{{ current_user.first_name }}</div>
                    <div class="user-email">{{ current_user.email }}</div>
                </div>
                <a href="{{ url_for('auth.logout') }}" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
                </div>
            {% endif %}
            {% endwith %}
            
            <!-- Page Header -->
            <div class="dashboard-header">
                <div class="welcome-text">
                    <h1>Your Learning Path</h1>
                    <p>Follow your personalized journey to mastery</p>
                </div>
            </div>
            
            <!-- Path Overview Section -->
            <div class="path-overview">
                <div class="path-header">
                    <div class="path-icon">
                        <i class="fas {{ path_details.icon }}"></i>
                    </div>
                    <div class="path-info">
                        <h1 class="path-title">{{ path_details.title }}</h1>
                        <div class="path-meta">
                            <span><i class="fas fa-clock"></i> {{ path_details.duration }}</span>
                            <span><i class="fas fa-book"></i> {{ path_details.courses }} Courses</span>
                            <span><i class="fas fa-layer-group"></i> {{ path_details.modules }} Modules</span>
                            <span><i class="fas fa-users"></i> 2,400+ Students</span>
                        </div>
                    </div>
                </div>
                
                <div class="path-description">
                    {{ path_details.description }}
                </div>
                
                <div class="path-progress">
                    <div class="progress-circle-container">
                        <div class="progress-circle" id="progress-circle" data-progress="{{ progress_percentage }}">
                            <div class="circle-inner">
                                <div class="circle-number">{{ progress_percentage }}%</div>
                                <div class="circle-text">completed</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-status">
                        <div class="status-item">
                            <div class="status-icon completed">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="status-text">
                                <h4>Programming Fundamentals</h4>
                                <p>Completed on May 15, 2023</p>
                            </div>
                        </div>
                        
                        <div class="status-item">
                            <div class="status-icon current">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="status-text">
                                <h4>Frameworks & Advanced Development</h4>
                                <p>In progress - 45% completed</p>
                            </div>
                        </div>
                        
                        <div class="status-item">
                            <div class="status-icon next">
                                <i class="fas fa-lock"></i>
                            </div>
                            <div class="status-text">
                                <h4>Real Projects & Career Preparation</h4>
                                <p>Unlocked after previous module is completed</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Path Timeline Section -->
            <div class="path-timeline-container">
                <div class="path-timeline-header">
                    <h2 class="path-timeline-title">Your Learning Map</h2>
                </div>
                
                {% if path_details.title == "Web Development" %}
                <div class="path-timeline web-dev-timeline">
                    <!-- Web Development specific map style -->
                    <div class="web-path-intro">
                        <p><i class="fas fa-code"></i> Follow this roadmap to become a full-stack web developer</p>
                    </div>
                    {% for module in modules %}
                    <div class="path-module web-module {% if module.status == 'completed' %}completed{% elif module.status == 'current' %}current{% else %}locked{% endif %}">
                        <div class="module-header" data-toggle="module-content-{{ loop.index }}">
                            <div class="module-title-wrapper">
                                <div class="module-icon">
                                    {% if module.status == 'completed' %}
                                        <i class="fas fa-check"></i>
                                    {% elif module.status == 'current' %}
                                        <i class="fas fa-clock"></i>
                                    {% else %}
                                        <i class="fas fa-lock"></i>
                                    {% endif %}
                                </div>
                                <div class="module-title-area">
                                    <h3 class="module-title">{{ module.title }}</h3>
                                    <div class="module-meta">
                                        <span><i class="fas fa-book"></i> {{ module.no_of_courses }} Courses</span>
                                        {% if module.no_of_projects %}
                                        <span><i class="fas fa-project-diagram"></i> {{ module.no_of_projects }} Project{{ 's' if module.no_of_projects > 1 }}</span>
                                        {% endif %}
                                        <span><i class="fas fa-clock"></i> {{ module.duration }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="module-progress">
                                <div class="progress-bar">
                                    <div style="width: {{ module.progress|default(0) }}%;"></div>
                                </div>
                                <span class="progress-text">{{ module.progress|default(0) }}%</span>
                            </div>
                            
                            <button class="module-toggle" data-toggle="module-content-{{ loop.index }}">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div id="module-content-{{ loop.index }}" class="module-content {% if loop.index == 1 or (loop.index == 2 and modules[0].status == 'completed') %}active{% endif %}">
                            <div class="module-description">
                                {{ module.description }}
                            </div>
                            
                            <div class="module-courses">
                                {% for course in module.courses %}
                                <div class="module-course {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}completed{% elif module.status == 'current' %}locked{% else %}locked{% endif %}">
                                    <div class="course-status-icon">
                                        {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="course-details">
                                        <h4 class="course-title">{{ course }}</h4>
                                        <div class="course-meta">
                                            <span><i class="fas fa-clock"></i> 4-5 hours</span>
                                            <span><i class="fas fa-video"></i> 20 lessons</span>
                                            <span><i class="fas fa-puzzle-piece"></i> 6 exercises</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                                
                                {% for project in module.projects %}
                                <div class="module-project {% if module.status == 'completed' %}completed{% else %}locked{% endif %}">
                                    <div class="project-status-icon">
                                        {% if module.status == 'completed' %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="project-details">
                                        <h4 class="project-title">{{ project }}</h4>
                                        <div class="project-meta">
                                            <span><i class="fas fa-clock"></i> 8-10 hours</span>
                                            <span><i class="fas fa-trophy"></i> Final Project</span>
                                            <span><i class="fas fa-certificate"></i> Certificate</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% elif path_details.title == "Data Science" %}
                <div class="path-timeline data-science-timeline">
                    <!-- Data Science specific map style -->
                    <div class="data-path-intro">
                        <p><i class="fas fa-chart-bar"></i> Master the art of data analysis and machine learning</p>
                    </div>
                    {% for module in modules %}
                    <div class="path-module data-module {% if module.status == 'completed' %}completed{% elif module.status == 'current' %}current{% else %}locked{% endif %}">
                        <div class="module-header" data-toggle="module-content-{{ loop.index }}">
                            <div class="module-title-wrapper">
                                <div class="module-icon">
                                    {% if module.status == 'completed' %}
                                        <i class="fas fa-check"></i>
                                    {% elif module.status == 'current' %}
                                        <i class="fas fa-chart-line"></i>
                                    {% else %}
                                        <i class="fas fa-lock"></i>
                                    {% endif %}
                                </div>
                                <div class="module-title-area">
                                    <h3 class="module-title">{{ module.title }}</h3>
                                    <div class="module-meta">
                                        <span><i class="fas fa-book"></i> {{ module.no_of_courses }} Courses</span>
                                        {% if module.no_of_projects %}
                                        <span><i class="fas fa-project-diagram"></i> {{ module.no_of_projects }} Project{{ 's' if module.no_of_projects > 1 }}</span>
                                        {% endif %}
                                        <span><i class="fas fa-clock"></i> {{ module.duration }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="module-progress">
                                <div class="progress-bar">
                                    <div style="width: {{ module.progress|default(0) }}%;"></div>
                                </div>
                                <span class="progress-text">{{ module.progress|default(0) }}%</span>
                            </div>
                            
                            <button class="module-toggle" data-toggle="module-content-{{ loop.index }}">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div id="module-content-{{ loop.index }}" class="module-content {% if loop.index == 1 or (loop.index == 2 and modules[0].status == 'completed') %}active{% endif %}">
                            <div class="module-description">
                                {{ module.description }}
                            </div>
                            
                            <div class="module-courses">
                                {% for course in module.courses %}
                                <div class="module-course {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}completed{% elif module.status == 'current' %}locked{% else %}locked{% endif %}">
                                    <div class="course-status-icon">
                                        {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="course-details">
                                        <h4 class="course-title">{{ course }}</h4>
                                        <div class="course-meta">
                                            <span><i class="fas fa-clock"></i> 4-5 hours</span>
                                            <span><i class="fas fa-video"></i> 20 lessons</span>
                                            <span><i class="fas fa-puzzle-piece"></i> 6 exercises</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                                
                                {% for project in module.projects %}
                                <div class="module-project {% if module.status == 'completed' %}completed{% else %}locked{% endif %}">
                                    <div class="project-status-icon">
                                        {% if module.status == 'completed' %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="project-details">
                                        <h4 class="project-title">{{ project }}</h4>
                                        <div class="project-meta">
                                            <span><i class="fas fa-clock"></i> 8-10 hours</span>
                                            <span><i class="fas fa-trophy"></i> Final Project</span>
                                            <span><i class="fas fa-certificate"></i> Certificate</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% elif path_details.title == "Cybersecurity" %}
                <div class="path-timeline security-timeline">
                    <!-- Cybersecurity specific map style -->
                    <div class="security-path-intro">
                        <p><i class="fas fa-shield-alt"></i> Build skills to protect systems and networks from digital threats</p>
                    </div>
                    <!-- Similar structure but with security-specific icons and styling -->
                    {% for module in modules %}
                    <div class="path-module security-module {% if module.status == 'completed' %}completed{% elif module.status == 'current' %}current{% else %}locked{% endif %}">
                        <div class="module-header" data-toggle="module-content-{{ loop.index }}">
                            <div class="module-title-wrapper">
                                <div class="module-icon">
                                    {% if module.status == 'completed' %}
                                        <i class="fas fa-check"></i>
                                    {% elif module.status == 'current' %}
                                        <i class="fas fa-shield-alt"></i>
                                    {% else %}
                                        <i class="fas fa-lock"></i>
                                    {% endif %}
                                </div>
                                <div class="module-title-area">
                                    <h3 class="module-title">{{ module.title }}</h3>
                                    <div class="module-meta">
                                        <span><i class="fas fa-book"></i> {{ module.no_of_courses }} Courses</span>
                                        {% if module.no_of_projects %}
                                        <span><i class="fas fa-project-diagram"></i> {{ module.no_of_projects }} Project{{ 's' if module.no_of_projects > 1 }}</span>
                                        {% endif %}
                                        <span><i class="fas fa-clock"></i> {{ module.duration }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="module-progress">
                                <div class="progress-bar">
                                    <div style="width: {{ module.progress|default(0) }}%;"></div>
                                </div>
                                <span class="progress-text">{{ module.progress|default(0) }}%</span>
                            </div>
                            
                            <button class="module-toggle" data-toggle="module-content-{{ loop.index }}">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div id="module-content-{{ loop.index }}" class="module-content {% if loop.index == 1 or (loop.index == 2 and modules[0].status == 'completed') %}active{% endif %}">
                            <div class="module-description">
                                {{ module.description }}
                            </div>
                            
                            <div class="module-courses">
                                {% for course in module.courses %}
                                <div class="module-course {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}completed{% elif module.status == 'current' %}locked{% else %}locked{% endif %}">
                                    <div class="course-status-icon">
                                        {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="course-details">
                                        <h4 class="course-title">{{ course }}</h4>
                                        <div class="course-meta">
                                            <span><i class="fas fa-clock"></i> 4-5 hours</span>
                                            <span><i class="fas fa-video"></i> 20 lessons</span>
                                            <span><i class="fas fa-puzzle-piece"></i> 6 exercises</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                                
                                {% for project in module.projects %}
                                <div class="module-project {% if module.status == 'completed' %}completed{% else %}locked{% endif %}">
                                    <div class="project-status-icon">
                                        {% if module.status == 'completed' %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="project-details">
                                        <h4 class="project-title">{{ project }}</h4>
                                        <div class="project-meta">
                                            <span><i class="fas fa-clock"></i> 8-10 hours</span>
                                            <span><i class="fas fa-trophy"></i> Final Project</span>
                                            <span><i class="fas fa-certificate"></i> Certificate</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% elif path_details.title == "Mobile App Development" %}
                <div class="path-timeline mobile-dev-timeline">
                    <!-- Mobile Development specific map style -->
                    <div class="mobile-path-intro">
                        <p><i class="fas fa-mobile-alt"></i> Create powerful mobile applications for iOS and Android</p>
                    </div>
                    {% for module in modules %}
                    <div class="path-module mobile-module {% if module.status == 'completed' %}completed{% elif module.status == 'current' %}current{% else %}locked{% endif %}">
                        <div class="module-header" data-toggle="module-content-{{ loop.index }}">
                            <div class="module-title-wrapper">
                                <div class="module-icon">
                                    {% if module.status == 'completed' %}
                                        <i class="fas fa-check"></i>
                                    {% elif module.status == 'current' %}
                                        <i class="fas fa-mobile-alt"></i>
                                    {% else %}
                                        <i class="fas fa-lock"></i>
                                    {% endif %}
                                </div>
                                <div class="module-title-area">
                                    <h3 class="module-title">{{ module.title }}</h3>
                                    <div class="module-meta">
                                        <span><i class="fas fa-book"></i> {{ module.no_of_courses }} Courses</span>
                                        {% if module.no_of_projects %}
                                        <span><i class="fas fa-project-diagram"></i> {{ module.no_of_projects }} Project{{ 's' if module.no_of_projects > 1 }}</span>
                                        {% endif %}
                                        <span><i class="fas fa-clock"></i> {{ module.duration }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="module-progress">
                                <div class="progress-bar">
                                    <div style="width: {{ module.progress|default(0) }}%;"></div>
                                </div>
                                <span class="progress-text">{{ module.progress|default(0) }}%</span>
                            </div>
                            
                            <button class="module-toggle" data-toggle="module-content-{{ loop.index }}">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div id="module-content-{{ loop.index }}" class="module-content {% if loop.index == 1 or (loop.index == 2 and modules[0].status == 'completed') %}active{% endif %}">
                            <div class="module-description">
                                {{ module.description }}
                            </div>
                            
                            <div class="module-courses">
                                {% for course in module.courses %}
                                <div class="module-course {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}completed{% elif module.status == 'current' %}locked{% else %}locked{% endif %}">
                                    <div class="course-status-icon">
                                        {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="course-details">
                                        <h4 class="course-title">{{ course }}</h4>
                                        <div class="course-meta">
                                            <span><i class="fas fa-clock"></i> 4-5 hours</span>
                                            <span><i class="fas fa-video"></i> 20 lessons</span>
                                            <span><i class="fas fa-puzzle-piece"></i> 6 exercises</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                                
                                {% for project in module.projects %}
                                <div class="module-project {% if module.status == 'completed' %}completed{% else %}locked{% endif %}">
                                    <div class="project-status-icon">
                                        {% if module.status == 'completed' %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="project-details">
                                        <h4 class="project-title">{{ project }}</h4>
                                        <div class="project-meta">
                                            <span><i class="fas fa-clock"></i> 8-10 hours</span>
                                            <span><i class="fas fa-trophy"></i> Final Project</span>
                                            <span><i class="fas fa-certificate"></i> Certificate</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="path-timeline">
                    <!-- For each module in the learning path -->
                    {% for module in modules %}
                    <div class="path-module {% if module.status == 'completed' %}completed{% elif module.status == 'current' %}current{% else %}locked{% endif %}">
                        <div class="module-header" data-toggle="module-content-{{ loop.index }}">
                            <div class="module-title-wrapper">
                                <div class="module-icon">
                                    {% if module.status == 'completed' %}
                                        <i class="fas fa-check"></i>
                                    {% elif module.status == 'current' %}
                                        <i class="fas fa-clock"></i>
                                    {% else %}
                                        <i class="fas fa-lock"></i>
                                    {% endif %}
                                </div>
                                <div class="module-title-area">
                                    <h3 class="module-title">{{ module.title }}</h3>
                                    <div class="module-meta">
                                        <span><i class="fas fa-book"></i> {{ module.no_of_courses }} Courses</span>
                                        {% if module.no_of_projects %}
                                        <span><i class="fas fa-project-diagram"></i> {{ module.no_of_projects }} Project{{ 's' if module.no_of_projects > 1 }}</span>
                                        {% endif %}
                                        <span><i class="fas fa-clock"></i> {{ module.duration }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="module-progress">
                                <div class="progress-bar">
                                    <div style="width: {{ module.progress|default(0) }}%;"></div>
                                </div>
                                <span class="progress-text">{{ module.progress|default(0) }}%</span>
                            </div>
                            
                            <button class="module-toggle" data-toggle="module-content-{{ loop.index }}">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div id="module-content-{{ loop.index }}" class="module-content {% if loop.index == 1 or (loop.index == 2 and modules[0].status == 'completed') %}active{% endif %}">
                            <div class="module-description">
                                {{ module.description }}
                            </div>
                            
                            <div class="module-courses">
                                {% for course in module.courses %}
                                <div class="module-course {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}completed{% elif module.status == 'current' %}locked{% else %}locked{% endif %}">
                                    <div class="course-status-icon">
                                        {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="course-details">
                                        <h4 class="course-title">{{ course }}</h4>
                                        <div class="course-meta">
                                            <span><i class="fas fa-clock"></i> 4-5 hours</span>
                                            <span><i class="fas fa-video"></i> 20 lessons</span>
                                            <span><i class="fas fa-puzzle-piece"></i> 6 exercises</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' or (module.status == 'current' and loop.index == 1) %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                                
                                {% for project in module.projects %}
                                <div class="module-project {% if module.status == 'completed' %}completed{% else %}locked{% endif %}">
                                    <div class="project-status-icon">
                                        {% if module.status == 'completed' %}
                                            <i class="fas fa-check"></i>
                                        {% else %}
                                            <i class="fas fa-lock"></i>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="project-details">
                                        <h4 class="project-title">{{ project }}</h4>
                                        <div class="project-meta">
                                            <span><i class="fas fa-clock"></i> 8-10 hours</span>
                                            <span><i class="fas fa-trophy"></i> Final Project</span>
                                            <span><i class="fas fa-certificate"></i> Certificate</span>
                                        </div>
                                    </div>
                                    
                                    {% if module.status == 'completed' %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-redo"></i> Review
                                    </a>
                                    {% else %}
                                    <button class="btn btn-secondary btn-sm">
                                        <i class="fas fa-lock"></i> Locked
                                    </button>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        try {
            console.log("Learning path script initialized");
            
            // Add initial animation states via CSS to prevent flash of unstyled content
            const styleElement = document.createElement('style');
            styleElement.textContent = `
                .dashboard-container { opacity: 0; }
                .main-content { opacity: 0; transform: translateY(20px); }
                .dashboard-header { opacity: 0; transform: translateY(-20px); }
                .path-overview { opacity: 0; transform: translateY(30px); }
                .path-timeline-container { opacity: 0; transform: translateY(40px); }
                .path-header, .path-description, .path-progress { opacity: 0; }
                .path-module { opacity: 0; transform: translateY(20px); }
                .sidebar { opacity: 0; transform: translateX(-30px); }
                .user-profile { opacity: 0; }
                .path-progress-indicator, .progress-circle, .status-item, .module-course, .module-project { 
                    opacity: 0; 
                    transform: translateY(20px);
                }
            `;
            document.head.appendChild(styleElement);
            
            // Master timeline for coordinated animations
            setTimeout(() => {
                // 1. Animate sidebar first
                document.querySelector('.sidebar').style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                document.querySelector('.sidebar').style.opacity = '1';
                document.querySelector('.sidebar').style.transform = 'translateX(0)';
                
                // 2. Then main container
                setTimeout(() => {
                    document.querySelector('.dashboard-container').style.transition = 'opacity 0.5s ease-out';
                    document.querySelector('.dashboard-container').style.opacity = '1';
                    
                    // 3. Then header
                    setTimeout(() => {
                        document.querySelector('.dashboard-header').style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                        document.querySelector('.dashboard-header').style.opacity = '1';
                        document.querySelector('.dashboard-header').style.transform = 'translateY(0)';
                        
                        // 4. Path overview section
                        setTimeout(() => {
                            document.querySelector('.path-overview').style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                            document.querySelector('.path-overview').style.opacity = '1';
                            document.querySelector('.path-overview').style.transform = 'translateY(0)';
                            
                            // 5. Animate path header, description, and progress sections
                            document.querySelector('.path-header').style.transition = 'opacity 0.5s ease-out';
                            document.querySelector('.path-header').style.opacity = '1';
                            
                            setTimeout(() => {
                                document.querySelector('.path-description').style.transition = 'opacity 0.5s ease-out';
                                document.querySelector('.path-description').style.opacity = '1';
                            }, 150);
                            
                            setTimeout(() => {
                                document.querySelector('.path-progress').style.transition = 'opacity 0.5s ease-out';
                                document.querySelector('.path-progress').style.opacity = '1';
                            }, 300);
                        }, 300);
                    }, 150);
                }, 100);
                
                // Animate user profile in sidebar
                setTimeout(() => {
                    document.querySelector('.user-profile').style.transition = 'opacity 0.5s ease-out';
                    document.querySelector('.user-profile').style.opacity = '1';
                }, 700);
                
                // Main content area animation
                setTimeout(() => {
                    document.querySelector('.main-content').style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                    document.querySelector('.main-content').style.opacity = '1';
                    document.querySelector('.main-content').style.transform = 'translateY(0)';
                }, 300);
                
                // Animate path timeline container with a slight delay
                setTimeout(() => {
                    document.querySelector('.path-timeline-container').style.transition = 'opacity 0.7s ease-out, transform 0.7s ease-out';
                    document.querySelector('.path-timeline-container').style.opacity = '1';
                    document.querySelector('.path-timeline-container').style.transform = 'translateY(0)';
                }, 800);
            }, 100);
            
            // Animate progress circle
            const progressCircle = document.getElementById('progress-circle');
            
            if (progressCircle) {
                const progressPercentage = parseInt(progressCircle.getAttribute('data-progress'), 10) || 0;
                
                console.log("Setting progress circle to: " + progressPercentage + "%");
                setTimeout(() => {
                    progressCircle.style.transition = 'background 1.5s ease-in-out, opacity 0.6s ease-out, transform 0.6s ease-out';
                    progressCircle.style.opacity = '1';
                    progressCircle.style.transform = 'scale(1)';
                    progressCircle.style.background = `conic-gradient(var(--primary) ${progressPercentage * 3.6}deg, var(--background-light) 0deg)`;
                }, 1000);
            }
            
            // Animate progress status items with a staggered effect
            const statusItems = document.querySelectorAll('.status-item');
            statusItems.forEach((item, index) => {
                setTimeout(() => {
                    item.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                    item.style.opacity = '1';
                    item.style.transform = 'translateY(0)';
                }, 1200 + (index * 200));
            });
            
            // Animate path modules with a cascading effect
            const pathModules = document.querySelectorAll('.path-module');
            pathModules.forEach((module, index) => {
                setTimeout(() => {
                    module.style.transition = 'opacity 0.7s ease-out, transform 0.7s ease-out';
                    module.style.opacity = '1';
                    module.style.transform = 'translateY(0)';
                }, 1000 + (index * 200));
            });
            
            // Animate module courses and projects with a staggered effect (when visible)
            // This will be triggered when modules are expanded
            const animateModuleContents = () => {
                const activeModuleContents = document.querySelectorAll('.module-content.active');
                
                activeModuleContents.forEach(content => {
                    const courses = content.querySelectorAll('.module-course');
                    courses.forEach((course, index) => {
                        setTimeout(() => {
                            course.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                            course.style.opacity = '1';
                            course.style.transform = 'translateY(0)';
                        }, 100 + (index * 100));
                    });
                    
                    const projects = content.querySelectorAll('.module-project');
                    projects.forEach((project, index) => {
                        setTimeout(() => {
                            project.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                            project.style.opacity = '1';
                            project.style.transform = 'translateY(0)';
                        }, 500 + (index * 100));
                    });
                });
            };
            
            // Execute this after the initial animations
            setTimeout(animateModuleContents, 1500);
            
            // Toggle sidebar on mobile
            const sidebar = document.querySelector('.sidebar');
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('active');
                    
                    // Toggle between hamburger and close icon
                    const icon = this.querySelector('i');
                    if (sidebar.classList.contains('active')) {
                        icon.classList.remove('fa-bars');
                        icon.classList.add('fa-times');
                    } else {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                    
                    document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
                });
            }
            
            // Handle responsive sidebar on window resize
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    sidebar.classList.remove('active');
                    document.body.style.overflow = '';
                    
                    // Reset icon
                    const icon = menuToggle.querySelector('i');
                    if (icon) {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                }
            });
            
            // Module toggles - run animations on module content when expanded
            const moduleHeaders = document.querySelectorAll('.module-header');
            moduleHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-toggle');
                    const moduleContent = document.getElementById(targetId);
                    
                    if (moduleContent) {
                        const isActive = moduleContent.classList.contains('active');
                        
                        if (isActive) {
                            moduleContent.classList.remove('active');
                        } else {
                            moduleContent.classList.add('active');
                            // Animate the newly visible content
                            const courses = moduleContent.querySelectorAll('.module-course');
                            courses.forEach((course, index) => {
                                course.style.opacity = '0';
                                course.style.transform = 'translateY(20px)';
                                setTimeout(() => {
                                    course.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                                    course.style.opacity = '1';
                                    course.style.transform = 'translateY(0)';
                                }, 100 + (index * 100));
                            });
                            
                            const projects = moduleContent.querySelectorAll('.module-project');
                            projects.forEach((project, index) => {
                                project.style.opacity = '0';
                                project.style.transform = 'translateY(20px)';
                                setTimeout(() => {
                                    project.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                                    project.style.opacity = '1';
                                    project.style.transform = 'translateY(0)';
                                }, 500 + (index * 100));
                            });
                        }
                    }
                });
            });
            
            const moduleToggles = document.querySelectorAll('.module-toggle');
            moduleToggles.forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent the header click event
                    
                    const targetId = this.getAttribute('data-toggle');
                    const moduleContent = document.getElementById(targetId);
                    
                    if (moduleContent) {
                        const isActive = moduleContent.classList.contains('active');
                        
                        if (isActive) {
                            moduleContent.classList.remove('active');
                        } else {
                            moduleContent.classList.add('active');
                            // Animate the newly visible content
                            const courses = moduleContent.querySelectorAll('.module-course');
                            courses.forEach((course, index) => {
                                course.style.opacity = '0';
                                course.style.transform = 'translateY(20px)';
                                setTimeout(() => {
                                    course.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                                    course.style.opacity = '1';
                                    course.style.transform = 'translateY(0)';
                                }, 100 + (index * 100));
                            });
                            
                            const projects = moduleContent.querySelectorAll('.module-project');
                            projects.forEach((project, index) => {
                                project.style.opacity = '0';
                                project.style.transform = 'translateY(20px)';
                                setTimeout(() => {
                                    project.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                                    project.style.opacity = '1';
                                    project.style.transform = 'translateY(0)';
                                }, 500 + (index * 100));
                            });
                        }
                    }
                });
            });
            
            // Filter buttons for alternative paths
            const filterButtons = document.querySelectorAll('.filter-btn');
            const pathCards = document.querySelectorAll('.path-card');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Get filter value
                    const filter = this.getAttribute('data-filter');
                    
                    // Show/hide cards based on filter
                    pathCards.forEach(card => {
                        if (filter === 'all' || card.getAttribute('data-category') === filter) {
                            card.style.display = 'flex';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
            
            console.log("Learning path animations initialized successfully");
        } catch (error) {
            console.error("Error in learning path initialization: ", error);
        }
    });
</script>
{% endblock %} 